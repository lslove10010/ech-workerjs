function _0xbbc5(){const _0x172448=['toString','opened','startsWith','1tvtxWF','WebSocket\x20Proxy\x20Server','jkmbb','3btdHqh','url','2528244uGFpld','CLOSE','58422filaaU','indexOf','cannot\x20connect','releaseLock','send','382640FPvTce','1988812rtLeCt','writable','2725432iAHvfi','read','readable','message','CONNECTED','includes','toLowerCase','substring','string','400YyGFHd','error','17083cKZKZB','Sec-WebSocket-Protocol','DATA:','close','addEventListener','accept','values','encode','ERROR:','length','6zDQwBt','9nCUWsC','Unauthorized','data','Server\x20closed','ProxyIP.CMLiussss.net','1587636DUCTXB','Upgrade','get','catch','readyState','Expected\x20WebSocket','write','getWriter','headers'];_0xbbc5=function(){return _0x172448;};return _0xbbc5();}const _0x5996fb=_0x37bc;(function(_0x4eeba0,_0x568189){const _0x5eb0fb=_0x37bc,_0x310822=_0x4eeba0();while(!![]){try{const _0x56787f=-parseInt(_0x5eb0fb(0x1db))/0x1*(parseInt(_0x5eb0fb(0x1e2))/0x2)+parseInt(_0x5eb0fb(0x1de))/0x3*(parseInt(_0x5eb0fb(0x1cf))/0x4)+-parseInt(_0x5eb0fb(0x1e7))/0x5*(-parseInt(_0x5eb0fb(0x1c9))/0x6)+-parseInt(_0x5eb0fb(0x1e8))/0x7+-parseInt(_0x5eb0fb(0x1ea))/0x8*(-parseInt(_0x5eb0fb(0x1ca))/0x9)+-parseInt(_0x5eb0fb(0x1f3))/0xa*(parseInt(_0x5eb0fb(0x1f5))/0xb)+-parseInt(_0x5eb0fb(0x1e0))/0xc;if(_0x56787f===_0x568189)break;else _0x310822['push'](_0x310822['shift']());}catch(_0x5028a0){_0x310822['push'](_0x310822['shift']());}}}(_0xbbc5,0x37a8e));function _0x37bc(_0x21b4f2,_0x5526a3){const _0xbbc5a4=_0xbbc5();return _0x37bc=function(_0x37bc58,_0x204d1a){_0x37bc58=_0x37bc58-0x1c5;let _0x2bfa83=_0xbbc5a4[_0x37bc58];return _0x2bfa83;},_0x37bc(_0x21b4f2,_0x5526a3);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2,CF_FALLBACK_IPS=[_0x5996fb(0x1ce)],encoder=new TextEncoder();import{connect}from'cloudflare:sockets';export default{async 'fetch'(_0x528d1e,_0x2ec5b9,_0x4c3a65){const _0xea224a=_0x5996fb;try{const _0x3306b8=_0xea224a(0x1dd),_0x69c86=_0x528d1e['headers'][_0xea224a(0x1d1)](_0xea224a(0x1d0));if(!_0x69c86||_0x69c86[_0xea224a(0x1f0)]()!=='websocket')return new URL(_0x528d1e[_0xea224a(0x1df)])['pathname']==='/'?new Response(_0xea224a(0x1dc),{'status':0xc8}):new Response(_0xea224a(0x1d4),{'status':0x1aa});if(_0x3306b8&&_0x528d1e['headers']['get'](_0xea224a(0x1f6))!==_0x3306b8)return new Response(_0xea224a(0x1cb),{'status':0x191});const [_0x3b52c2,_0x82d6dd]=Object[_0xea224a(0x1c5)](new WebSocketPair());_0x82d6dd[_0xea224a(0x1fa)](),handleSession(_0x82d6dd)[_0xea224a(0x1d2)](()=>safeCloseWebSocket(_0x82d6dd));const _0x1a431e={'status':0x65,'webSocket':_0x3b52c2};return _0x3306b8&&(_0x1a431e[_0xea224a(0x1d7)]={'Sec-WebSocket-Protocol':_0x3306b8}),new Response(null,_0x1a431e);}catch(_0x29631c){return new Response(_0x29631c[_0xea224a(0x1d8)](),{'status':0x1f4});}}};async function handleSession(_0x308640){const _0x5ce655=_0x5996fb;let _0x2a40e1,_0x5e0741,_0x435763,_0x2d52e2=![];const _0x573850=()=>{const _0x13c2f3=_0x37bc;if(_0x2d52e2)return;_0x2d52e2=!![];try{_0x5e0741?.[_0x13c2f3(0x1e5)]();}catch{}try{_0x435763?.[_0x13c2f3(0x1e5)]();}catch{}try{_0x2a40e1?.[_0x13c2f3(0x1f8)]();}catch{}_0x5e0741=_0x435763=_0x2a40e1=null,safeCloseWebSocket(_0x308640);},_0x4e9e6c=async()=>{const _0x19e50e=_0x37bc;try{while(!_0x2d52e2&&_0x435763){const {done:_0x473b57,value:_0x2d42f1}=await _0x435763[_0x19e50e(0x1eb)]();if(_0x473b57)break;if(_0x308640['readyState']!==WS_READY_STATE_OPEN)break;if(_0x2d42f1?.['byteLength']>0x0)_0x308640[_0x19e50e(0x1e6)](_0x2d42f1);}}catch{}if(!_0x2d52e2){try{_0x308640['send'](_0x19e50e(0x1e1));}catch{}_0x573850();}},_0xf20e88=_0x4cc68e=>{const _0x4378fb=_0x37bc;if(_0x4cc68e[0x0]==='['){const _0x22f6c1=_0x4cc68e[_0x4378fb(0x1e3)](']');return{'host':_0x4cc68e[_0x4378fb(0x1f1)](0x1,_0x22f6c1),'port':parseInt(_0x4cc68e[_0x4378fb(0x1f1)](_0x22f6c1+0x2),0xa)};}const _0xf3f6cc=_0x4cc68e['lastIndexOf'](':');return{'host':_0x4cc68e[_0x4378fb(0x1f1)](0x0,_0xf3f6cc),'port':parseInt(_0x4cc68e['substring'](_0xf3f6cc+0x1),0xa)};},_0x4fb2f0=_0x7408a0=>{const _0x268910=_0x37bc,_0x1b8910=_0x7408a0?.[_0x268910(0x1ed)]?.['toLowerCase']()||'';return _0x1b8910[_0x268910(0x1ef)]('proxy\x20request')||_0x1b8910[_0x268910(0x1ef)](_0x268910(0x1e4))||_0x1b8910['includes']('cloudflare');},_0x5d3b5e=async(_0x3b2111,_0x4c2180)=>{const _0x1e6641=_0x37bc,{host:_0x88d1bf,port:_0x4f6c91}=_0xf20e88(_0x3b2111),_0x4371f6=[null,...CF_FALLBACK_IPS];for(let _0x70ed3c=0x0;_0x70ed3c<_0x4371f6[_0x1e6641(0x1c8)];_0x70ed3c++){try{_0x2a40e1=connect({'hostname':_0x4371f6[_0x70ed3c]||_0x88d1bf,'port':_0x4f6c91});if(_0x2a40e1[_0x1e6641(0x1d9)])await _0x2a40e1[_0x1e6641(0x1d9)];_0x5e0741=_0x2a40e1[_0x1e6641(0x1e9)][_0x1e6641(0x1d6)](),_0x435763=_0x2a40e1[_0x1e6641(0x1ec)]['getReader']();_0x4c2180&&await _0x5e0741[_0x1e6641(0x1d5)](encoder[_0x1e6641(0x1c6)](_0x4c2180));_0x308640['send'](_0x1e6641(0x1ee)),_0x4e9e6c();return;}catch(_0x9f4d43){try{_0x5e0741?.[_0x1e6641(0x1e5)]();}catch{}try{_0x435763?.[_0x1e6641(0x1e5)]();}catch{}try{_0x2a40e1?.['close']();}catch{}_0x5e0741=_0x435763=_0x2a40e1=null;if(!_0x4fb2f0(_0x9f4d43)||_0x70ed3c===_0x4371f6[_0x1e6641(0x1c8)]-0x1)throw _0x9f4d43;}}};_0x308640[_0x5ce655(0x1f9)](_0x5ce655(0x1ed),async _0x487226=>{const _0x5d5cc4=_0x5ce655;if(_0x2d52e2)return;try{const _0x19c2cd=_0x487226[_0x5d5cc4(0x1cc)];if(typeof _0x19c2cd===_0x5d5cc4(0x1f2)){if(_0x19c2cd[_0x5d5cc4(0x1da)]('CONNECT:')){const _0x199cde=_0x19c2cd[_0x5d5cc4(0x1e3)]('|',0x8);await _0x5d3b5e(_0x19c2cd['substring'](0x8,_0x199cde),_0x19c2cd[_0x5d5cc4(0x1f1)](_0x199cde+0x1));}else{if(_0x19c2cd['startsWith'](_0x5d5cc4(0x1f7)))_0x5e0741&&await _0x5e0741['write'](encoder['encode'](_0x19c2cd[_0x5d5cc4(0x1f1)](0x5)));else _0x19c2cd===_0x5d5cc4(0x1e1)&&_0x573850();}}else _0x19c2cd instanceof ArrayBuffer&&_0x5e0741&&await _0x5e0741[_0x5d5cc4(0x1d5)](new Uint8Array(_0x19c2cd));}catch(_0x2abc72){try{_0x308640[_0x5d5cc4(0x1e6)](_0x5d5cc4(0x1c7)+_0x2abc72[_0x5d5cc4(0x1ed)]);}catch{}_0x573850();}}),_0x308640[_0x5ce655(0x1f9)]('close',_0x573850),_0x308640[_0x5ce655(0x1f9)](_0x5ce655(0x1f4),_0x573850);}function safeCloseWebSocket(_0xd4fe3a){const _0x19d4fa=_0x5996fb;try{(_0xd4fe3a[_0x19d4fa(0x1d3)]===WS_READY_STATE_OPEN||_0xd4fe3a[_0x19d4fa(0x1d3)]===WS_READY_STATE_CLOSING)&&_0xd4fe3a[_0x19d4fa(0x1f8)](0x3e8,_0x19d4fa(0x1cd));}catch{}}

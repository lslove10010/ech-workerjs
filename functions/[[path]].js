function _0x376e(){const _0x19a7f9=['readyState','headers','1706595rlmIkw','send','close','toLowerCase','12KZtCOF','568uFGPct','Fetch\x20error:','writable','jkmbb','read','releaseLock','length','error','startsWith','string','244gMvYCh','includes','values','55197GbRiWs','opened','byteLength','catch','websocket','CONNECTED','encode','get','Server\x20closed','CONNECT:','getWriter','Upgrade','30443iaPTph','610MuhREn','write','message','data','CLOSE','indexOf','readable','1678431Rmpkxl','lastIndexOf','substring','6yNpfnA','286014hyiBid','134999giTPKj','Server\x20Error','accept','addEventListener','Invalid\x20CONNECT\x20format','cannot\x20connect','TOKEN','proxy','getReader','55460awMLrO'];_0x376e=function(){return _0x19a7f9;};return _0x376e();}const _0x3d4fac=_0x1288;(function(_0xa09f59,_0x54ab1b){const _0x2ed8dc=_0x1288,_0x15b562=_0xa09f59();while(!![]){try{const _0x404bcc=parseInt(_0x2ed8dc(0x122))/0x1*(-parseInt(_0x2ed8dc(0x120))/0x2)+parseInt(_0x2ed8dc(0x11d))/0x3+parseInt(_0x2ed8dc(0x106))/0x4*(-parseInt(_0x2ed8dc(0x12b))/0x5)+parseInt(_0x2ed8dc(0x121))/0x6+-parseInt(_0x2ed8dc(0x115))/0x7*(-parseInt(_0x2ed8dc(0xfc))/0x8)+-parseInt(_0x2ed8dc(0x109))/0x9*(-parseInt(_0x2ed8dc(0x116))/0xa)+parseInt(_0x2ed8dc(0x12e))/0xb*(parseInt(_0x2ed8dc(0xfb))/0xc);if(_0x404bcc===_0x54ab1b)break;else _0x15b562['push'](_0x15b562['shift']());}catch(_0x2db711){_0x15b562['push'](_0x15b562['shift']());}}}(_0x376e,0x58c36));const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2,CF_FALLBACK_IPS=['ProxyIP.CMLiussss.net'],encoder=new TextEncoder(),DEFAULT_TOKEN=_0x3d4fac(0xff);function _0x1288(_0x1fe65a,_0x24150c){const _0x376e94=_0x376e();return _0x1288=function(_0x1288b0,_0xd20559){_0x1288b0=_0x1288b0-0xf9;let _0x264f24=_0x376e94[_0x1288b0];return _0x264f24;},_0x1288(_0x1fe65a,_0x24150c);}export default{async 'fetch'(_0x173e10,_0x5a1f0f,_0x88d991){const _0x7f49b=_0x3d4fac;try{const _0x37cc01=_0x5a1f0f[_0x7f49b(0x128)]||DEFAULT_TOKEN,_0xc008e0=_0x173e10[_0x7f49b(0x12d)][_0x7f49b(0x110)](_0x7f49b(0x114));if(!_0xc008e0||_0xc008e0[_0x7f49b(0xfa)]()!==_0x7f49b(0x10d))return await fetch(_0x173e10);if(_0x37cc01&&_0x173e10['headers']['get']('Sec-WebSocket-Protocol')!==_0x37cc01)return new Response('Unauthorized',{'status':0x191});const [_0xce3f3b,_0x3ab059]=Object[_0x7f49b(0x108)](new WebSocketPair());_0x3ab059[_0x7f49b(0x124)](),handleSession(_0x3ab059)[_0x7f49b(0x10c)](()=>safeCloseWebSocket(_0x3ab059));const _0x5d44ca={'status':0x65,'webSocket':_0xce3f3b};return _0x37cc01&&(_0x5d44ca[_0x7f49b(0x12d)]={'Sec-WebSocket-Protocol':_0x37cc01}),new Response(null,_0x5d44ca);}catch(_0xd7a42c){return console['error'](_0x7f49b(0xfd),_0xd7a42c),new Response(_0x7f49b(0x123),{'status':0x1f4});}}};async function handleSession(_0x542267){const _0x5b154a=_0x3d4fac;let _0x33e8b9=null,_0x7a6c5a=null,_0x42963c=null,_0x4688de=![];const _0x200b96=()=>{const _0x8c93bb=_0x1288;if(_0x4688de)return;_0x4688de=!![];try{_0x7a6c5a?.[_0x8c93bb(0x101)]();}catch{}try{_0x42963c?.['releaseLock']();}catch{}try{_0x33e8b9?.[_0x8c93bb(0xf9)]();}catch{}_0x7a6c5a=_0x42963c=_0x33e8b9=null,safeCloseWebSocket(_0x542267);},_0x365eda=async()=>{const _0x2a1c4a=_0x1288;try{while(!_0x4688de&&_0x42963c){const {done:_0x2e238b,value:_0x295dc0}=await _0x42963c[_0x2a1c4a(0x100)]();if(_0x2e238b)break;if(_0x542267['readyState']!==WS_READY_STATE_OPEN)break;if(_0x295dc0?.[_0x2a1c4a(0x10b)]>0x0)await _0x542267[_0x2a1c4a(0x12f)](_0x295dc0);}}catch{}if(!_0x4688de){try{_0x542267['send'](_0x2a1c4a(0x11a));}catch{}_0x200b96();}},_0x128eda=_0x1fb18d=>{const _0x4f3f40=_0x1288;if(_0x1fb18d[0x0]==='['){const _0xcacc95=_0x1fb18d['indexOf'](']');return{'host':_0x1fb18d[_0x4f3f40(0x11f)](0x1,_0xcacc95),'port':parseInt(_0x1fb18d['substring'](_0xcacc95+0x2),0xa)};}const _0x49f383=_0x1fb18d[_0x4f3f40(0x11e)](':');return{'host':_0x1fb18d[_0x4f3f40(0x11f)](0x0,_0x49f383),'port':parseInt(_0x1fb18d[_0x4f3f40(0x11f)](_0x49f383+0x1),0xa)};},_0x56de7a=_0x56f459=>{const _0x5d8ccc=_0x1288,_0x18a702=_0x56f459?.[_0x5d8ccc(0x118)]?.[_0x5d8ccc(0xfa)]()||'';return _0x18a702[_0x5d8ccc(0x107)](_0x5d8ccc(0x129))||_0x18a702[_0x5d8ccc(0x107)](_0x5d8ccc(0x127))||_0x18a702[_0x5d8ccc(0x107)]('cloudflare');},_0x77896e=async(_0xcc4b9a,_0x4a53c1)=>{const _0x28db69=_0x1288,{host:_0x5da1e8,port:_0x57c0c3}=_0x128eda(_0xcc4b9a),_0x852023=[null,...CF_FALLBACK_IPS];for(let _0x2e34f9=0x0;_0x2e34f9<_0x852023[_0x28db69(0x102)];_0x2e34f9++){try{_0x33e8b9=connect({'hostname':_0x852023[_0x2e34f9]||_0x5da1e8,'port':_0x57c0c3}),await _0x33e8b9[_0x28db69(0x10a)],_0x7a6c5a=_0x33e8b9[_0x28db69(0xfe)][_0x28db69(0x113)](),_0x42963c=_0x33e8b9[_0x28db69(0x11c)][_0x28db69(0x12a)]();_0x4a53c1&&await _0x7a6c5a[_0x28db69(0x117)](encoder[_0x28db69(0x10f)](_0x4a53c1));await _0x542267[_0x28db69(0x12f)](_0x28db69(0x10e)),_0x365eda();return;}catch(_0x5e7809){try{_0x7a6c5a?.[_0x28db69(0x101)]();}catch{}try{_0x42963c?.[_0x28db69(0x101)]();}catch{}try{_0x33e8b9?.[_0x28db69(0xf9)]();}catch{}_0x7a6c5a=_0x42963c=_0x33e8b9=null;if(!_0x56de7a(_0x5e7809)||_0x2e34f9===_0x852023[_0x28db69(0x102)]-0x1)throw _0x5e7809;}}};_0x542267[_0x5b154a(0x125)](_0x5b154a(0x118),async _0x4bd79a=>{const _0x1ff59c=_0x5b154a;if(_0x4688de)return;try{const _0x154d9d=_0x4bd79a[_0x1ff59c(0x119)];if(typeof _0x154d9d===_0x1ff59c(0x105)){if(_0x154d9d[_0x1ff59c(0x104)](_0x1ff59c(0x112))){const _0x70da7e=_0x154d9d[_0x1ff59c(0x11b)]('|',0x8);if(_0x70da7e===-0x1)throw new Error(_0x1ff59c(0x126));await _0x77896e(_0x154d9d[_0x1ff59c(0x11f)](0x8,_0x70da7e),_0x154d9d[_0x1ff59c(0x11f)](_0x70da7e+0x1));}else{if(_0x154d9d['startsWith']('DATA:'))_0x7a6c5a&&await _0x7a6c5a[_0x1ff59c(0x117)](encoder[_0x1ff59c(0x10f)](_0x154d9d[_0x1ff59c(0x11f)](0x5)));else _0x154d9d===_0x1ff59c(0x11a)&&_0x200b96();}}else _0x154d9d instanceof ArrayBuffer&&_0x7a6c5a&&await _0x7a6c5a[_0x1ff59c(0x117)](new Uint8Array(_0x154d9d));}catch(_0x2b83e6){try{_0x542267[_0x1ff59c(0x12f)]('ERROR:'+_0x2b83e6[_0x1ff59c(0x118)]);}catch{}_0x200b96();}}),_0x542267[_0x5b154a(0x125)](_0x5b154a(0xf9),_0x200b96),_0x542267[_0x5b154a(0x125)](_0x5b154a(0x103),_0x200b96);}function safeCloseWebSocket(_0x3dc7b5){const _0x924677=_0x3d4fac;try{(_0x3dc7b5[_0x924677(0x12c)]===WS_READY_STATE_OPEN||_0x3dc7b5['readyState']===WS_READY_STATE_CLOSING)&&_0x3dc7b5[_0x924677(0xf9)](0x3e8,_0x924677(0x111));}catch{}}export const config={'runtime':'nodejs_compat'};
